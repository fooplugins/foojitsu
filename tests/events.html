<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>FooJitsu - QUnit tests</title>
	<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.20.0.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture">
	<div id="root">
		<a id="child"></a>
	</div>
</div>
<script src="http://code.jquery.com/qunit/qunit-1.20.0.js"></script>
<script src="../compiled/foojitsu.js"></script>
<script>
	QUnit.module('FooJitsu.prototype');
	QUnit.test('trigger', function(assert){
		assert.expect(6);
		var root = document.querySelector('#root'),
				$root = FooJitsu(root);

		function onClick(e){
			assert.ok(true, 'click handler executed');
			assert.ok(e instanceof MouseEvent, 'click event type');
		}
		function onKeyUp(e){
			assert.ok(true, 'keyup handler executed');
			assert.ok(e instanceof KeyboardEvent, 'keyup event type');
		}
		function onCustom(e){
			assert.ok(true, 'custom handler executed');
			assert.ok(e instanceof Event, 'custom event type');
		}
		root.addEventListener('click', onClick);
		root.addEventListener('keyup', onKeyUp);
		root.addEventListener('custom', onCustom);

		$root.trigger('click').trigger('keyup').trigger('custom');

		root.removeEventListener('click', onClick);
		root.removeEventListener('keyup', onKeyUp);
		root.removeEventListener('custom', onCustom);
	});
	QUnit.test('on', function(assert){
		assert.expect(5);
		var $root = FooJitsu('#root'),
				root = $root.get(0);

		function onClick(e){
			assert.ok(true, 'click handler executed');
			assert.ok(e instanceof MouseEvent, 'click event type');
		}
		function onCustom(e){
			assert.ok(true, 'custom handler executed');
			assert.ok(e instanceof Event, 'custom event type');
			assert.propEqual(e.data, {test: 'test'}, 'custom data');
		}
		$root.on('click', onClick).on('custom', {test: 'test'}, onCustom);
		$root.trigger('click').trigger('custom');

		root.removeEventListener('click', onClick);
		root.removeEventListener('custom', onCustom);
	});
	QUnit.test('off', function(assert){
		assert.expect(4);
		var $root = FooJitsu('#root');
		function onClick(e){
			assert.ok(true, 'click handler executed');
			assert.ok(e instanceof MouseEvent, 'click event type');
		}
		function onCustom(e){
			assert.ok(true, 'custom handler executed');
			assert.ok(e instanceof Event, 'custom event type');
		}
		$root.on('click', onClick).trigger('click').off('click').trigger('click');
		$root.on('custom', onCustom).trigger('custom').off('custom').trigger('custom');
	});
</script>
</body>
</html>